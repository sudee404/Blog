{% extends 'base.html' %} {% load static %} {% block title %}
<title>My Stories</title>
{% endblock title %} {% block nav %}
<li class="nav-item">
    <a class="nav-link" href="{% url 'index' %}">Home</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="{% url 'post-list' %}">Blog</a>
</li>
<li class="nav-item">
    <a class="nav-link text-warning" href="{% url 'stories' %}">Stories</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="{% url 'contact' %}">Contact</a>
</li>
{% endblock nav %} {% block body %}
<main>
    <div class="jumbotron jumbotron-fluid">
        <div class="container text-center">
            <h1 class="display-4 text-warning">My Stories</h1>
            <p class="lead">Browse through your posts.</p>
            <p class="lead">or</p>
            <p class="lead">
                <a
                    class="btn btn-warning btn-lg"
                    href="{% url 'post-form' %}"
                    role="button"
                    >Post a Story</a
                >
            </p>
        </div>
    </div>
    <br/>
    {% if posts %}
    <div class="container">
        <ul class="nav nav-tabs">
            <li class="active">
                <a
                    data-toggle="tab"
                    href="#drafts"
                    style="text-decoration: none"
                    class="text-right mr-3 text-warning"
                    >Drafts<span
                        class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                        >{{ drafts.count }}</span
                    ></a
                >
            </li>
            <span>&nbsp;|&nbsp;</span>
            <li>
                <a
                    data-toggle="tab"
                    href="#published"
                    style="text-decoration: none"
                    ><span class="text-right ml-3 text-success"
                        >Published<span
                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                        >
                            {{ published.count }}
                        </span></span
                    ></a
                >
            </li>
        </ul>
        <div class="tab-content">
            <div id="drafts" class="tab-pane active">
                <br />
                {% if drafts %}
                <h2 class="text-info">Drafts</h2>
                <hr class="bg-danger" />
                 {% for post in drafts %}
                <div class="jumbotron pl-3">
                    <div class="row px-3 mx-auto">
                        <div class="col-9">
                            <a
                                href="{{ post.author.get_absolute_url }}"
                                class="text-light"
                                style="text-decoration: none"
                            >
                                <img
                                    src="{{ post.author.pic.url }}"
                                    class="img-fluid rounded-circle"
                                    alt="Avatar"
                                    width="4%"
                                />
                                &nbsp; @{{ post.author }}</a
                            >
                            &nbsp; &middot; &nbsp;
                            <span
                                >Created :
                                <span class="text-danger"
                                    >{{ post.create_date|date:'D-M-Y' }}</span
                                ></span
                            >
                            &nbsp; &middot; &nbsp;
                            <a
                                type="button"
                                href="{% url 'post-publish' pk=post.pk %}"
                                class="btn btn-info btn-sm btn-outline-light rounded-pill"
                                >Publish
                            </a>
                            <p class="lead" style="font-weight: bolder">
                                <br />
                                <a
                                    href="{{  post.get_absolute_url  }}"
                                    class="text-warning img-fluid rounded-circle hd"
                                    style="text-decoration: none"
                                    >{{ post.title }}</a
                                >
                            </p>
                            <p>{{ post.content|truncatewords:100 }}</p>
                        </div>
                        {% if post.image %}
                        <div
                            class="col-3 justify-content-center mx-auto d-lg-block"
                        >
                            <img
                                src="{{ post.image.url }}"
                                class="img-fluid h-100 rounded-top"
                                alt=""
                                width="90%"
                            />
                        </div>
                        {% endif %}
                    </div>
                    <hr class="my-2" />
                </div>
                {% endfor %} {% else %}
                <div class="jumbotron jumbotron-fluid text-center">
                    <h1 class="display-4">No Drafts</h1>
                    <hr class="my-4" />
                    <p>You do not have any saved posts</p>
                    <p class="lead">
                        Add a new post above then come back again
                    </p>
                </div>
                {% endif %}
            </div>
            <div id="published" class="tab-pane fade">
                <br />
                {% if published %}
                <h2 class="text-info">Published</h2>
                <hr class="bg-danger" />
                {% for post in published %}
                <br />
                <div class="jumbotron pl-3">
                    <div class="row px-3 mx-auto d-flex">
                        <div class="col-9">
                            <a
                                href="{{ post.author.get_absolute_url }}"
                                class="text-light"
                                style="text-decoration: none"
                            >
                                <img
                                    src="{{ post.author.pic.url }}"
                                    class="img-fluid rounded-circle"
                                    alt="Avatar"
                                    width="4%"
                                />
                                &nbsp; @{{ post.author }}</a
                            >
                            &nbsp; &middot; &nbsp;
                            <span class="text-danger"
                                >Published : {{ post.publish_date|date:'D-M-Y'}}</span
                            >&nbsp; &middot; &nbsp;
                            <a
                                type="button"
                                href="{{  post.get_absolute_url  }}"
                                class="btn btn-info btn-sm rounded-pill"
                            >
                                Comment{{ post.approve_comments.count|pluralize}}
                                <span class="badge bg-secondary"
                                    >{{ post.approve_comments.count|default:'0'}}</span
                                >
                            </a>
                            <p class="lead" style="font-weight: bolder">
                                <br />
                                <a
                                    href="{{  post.get_absolute_url  }}"
                                    class="text-warning img-fluid rounded-circle hd"
                                    style="text-decoration: none"
                                    >{{ post.title }}</a
                                >
                            </p>
                            <p>{{ post.content|truncatewords:50 }}</p>
                        </div>
                        {% if post.image %}
                        <div
                            class="col-3 justify-content-center mx-auto d-lg-block"
                        >
                            <img
                                src="{{ post.image.url }}"
                                class="img-fluid h-100 rounded-top"
                                alt=""
                                width="90%"
                            />
                        </div>
                        {% endif %}
                    </div>
                    <hr class="my-2" />
                </div>
                {% endfor %} {% else %}
                <br />
                <div class="jumbotron jumbotron-fluid text-center">
                    <h1 class="display-4">No Posts Published</h1>
                    <hr class="my-4" />
                    <p>You have not published any post</p>
                    <p class="lead">Add a new post then publish it to view</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    {% else %}
    <div class="jumbotron">
        <h1 class="display-4">No Posts</h1>
        <p class="lead">You haven't posted anything yet</p>
        <hr class="my-4" />
        <p>Click below to make your first post.</p>
        <a
            class="btn btn-danger btn-outline-warning btn-lg"
            href="{% url 'post-form' %}"
            role="button"
            >Post</a
        >
    </div>
    {% endif %}
</main>
{% endblock body %} {% block footer %}
<footer class="container fixed-bottom">{% endblock footer %}</footer>
